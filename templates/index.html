<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PDF Comparison</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #f0f2f5, #e0f7fa);
        }
        .container {
            margin-top: 50px;
            background-color: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
            backdrop-filter: blur(10px);
        }
        h1 {
            color: #34495e;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 600;
            border-bottom: 3px solid #8e44ad;
            padding-bottom: 10px;
            letter-spacing: 1px;
        }
        .form-label {
            font-weight: 700;
            color: #2c3e50;
        }
        .form-control, .form-select {
            border-radius: 8px;
            border: 2px solid #a678e3;
            background-color: #f8f8f8;
            color: #34495e;
        }
        .form-control:focus, .form-select:focus {
            border-color: #a678e3;
            box-shadow: 0 0 0 3px rgba(166, 120, 227, 0.16);
            background-color: #ffffff;
        }
        .btn-primary {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            font-weight: 700;
            background: linear-gradient(to right, #a678e3, #8e44ad);
            color: #fff;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        .btn-primary:hover {
            background: linear-gradient(to right, #9b59b6, #7d3c98);
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
        }

        .mb-3 {
            margin-bottom: 25px;
        }

        .upload-feedback {
            display: none;
            align-items: center;
            margin-top: 10px;
            padding: 10px;
            border-radius: 8px;
            font-weight: 600;
        }
        .upload-success {
            color: #2ecc71;
            background-color: #e6f4ec;
            border: 2px solid #b7e1cd;
        }
        .upload-error {
            color: #e74c3c;
            background-color: #fceeee;
            border: 2px solid #f5c6cb;
        }
        .upload-icon {
            font-size: 1.5em;
            margin-right: 10px;
        }

        .file-upload-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
            border: 2px solid #a678e3;
            border-radius: 8px;
            background-color: #f8f8f8;
            padding: 0.375rem 0.75rem;
        }
        .file-upload-wrapper input[type=file] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            cursor: pointer;
            height: 100%;
            width: 100%;
        }
        .choose-file-button {
            display: inline-block;
            background: linear-gradient(to bottom, #a678e3, #9b59b6);
            border: none;
            color: #fff;
            padding: 0.375rem 0.75rem;
            border-radius: 0.25rem;
            font-weight: 600;
            margin-right: 0.75rem;
        }
        .file-upload-text {
            display: inline-block;
            max-width: 60%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>PDF Document Verification</h1>
    <form method="POST" action="/compare" enctype="multipart/form-data">
        <div class="mb-3">
            <label for="pdf_file1" class="form-label">Upload User Document</label>
            <div class="file-upload-wrapper">
                <label class="choose-file-button">Choose PDF</label>
                <span class="file-upload-text" id="file-upload-text-1">Click to upload PDF</span>
                <input type="file" id="pdf_file1" name="pdf_file1" accept=".pdf"
                       onchange="handleFileUpload(this, 'file-upload-text-1', 'feedback-1')">
            </div>
            <div id="feedback-1" class="upload-feedback"></div>
        </div>

        <div class="mb-3">
            <label for="pdf_file2" class="form-label">Upload Actual Document</label>
            <div class="file-upload-wrapper">
                <label class="choose-file-button">Choose PDF</label>
                <span class="file-upload-text" id="file-upload-text-2">Click to upload PDF</span>
                <input type="file" id="pdf_file2" name="pdf_file2" accept=".pdf"
                       onchange="handleFileUpload(this, 'file-upload-text-2', 'feedback-2')">
            </div>
            <div id="feedback-2" class="upload-feedback"></div>
        </div>

        <div class="row mb-3">
            <div class="col-md-4">
                <label for="stage" class="form-label">Stage</label>
                <select class="form-select" id="stage" name="stage">
                    <option value="">Select Stage</option>
                    <option value="Administrative Sanctions">Administrative Sanctions</option>
                    <option value="Technical Sanction">Technical Sanction</option>
                    <option value="Agreement">Agreement</option>
                    <option value="Mbook">Mbook</option>
                    <option value="Billing">Billing</option>
                </select>
            </div>
            <div class="col-md-4">
                <label for="type" class="form-label">Type</label>
                <select class="form-select" id="type" name="type">
                    <option value="">Select Type</option>
                    <option value="For Migration">Migration</option>
                    <option value="For New">New</option>
                    <option value="Amendment (Revised AS)">Amendment</option>
                </select>
            </div>
            <div class="col-md-4">
                <label for="doc_type" class="form-label">Document</label>
                <select class="form-select" id="doc_type" name="doc_type">
                    <option value="">Select Document Type</option>
                </select>
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Compare Documents</button>
    </form>
</div>

<script>
    const documentOptions = {
        'Administrative Sanctions': {
            'For Migration': ['GO/Proceedings Copy', 'Proposal estimate'],
            'For New': [],
            'Amendment (Revised AS)': ['Revised GO/Proceedings Copy']
        },
        'Technical Sanction': {
            'For Migration': ['Technical Sanction copy'],
            'For New': [],
            'Amendment (Revised AS)': ['Revised Technical Sanction copy']
        },
        'Agreement': {
            'For Migration': ['Agreement copy', 'BG(bank guarantee)/ Challan -EMD', 'BG/Challan - ASD', 'Mobilization Advance -ADV', 'Retention of Withheld Amount - RET'],
            'For New': ['Agreement copy', 'BG(bank guarantee)/ Challan -EMD', 'BG/Challan - ASD', 'Mobilization Advance -ADV', 'Retention of Withheld Amount - RET'],
            'For Amendment': ['Supplementary Agreement copy', 'Extension BG']
        },
        'Mbook': {
            'For Migration': ['Mbook physical copy'],
            'For New': [],
            'Amendment (Revised AS)': []
        },
        'Billing': {
            'For Migration': ['Price Adjustment', 'Quality control (QC) Document', 'Seigniorage charges', 'EOAT', 'Lead statement', 'GST'],
            'For New': [],
            'Amendment (Revised AS)': [],
        },
    };

    document.getElementById('stage').addEventListener('change', updateDocumentTypes);
    document.getElementById('type').addEventListener('change', updateDocumentTypes);

    function updateDocumentTypes() {
        const stage = document.getElementById('stage').value;
        const type = document.getElementById('type').value;
        const docTypeDropdown = document.getElementById('doc_type');
        docTypeDropdown.innerHTML = '<option value="">Select Document Type</option>';
        if (stage && type && documentOptions[stage] && documentOptions[stage][type]) {
            documentOptions[stage][type].forEach(doc => {
                const option = document.createElement('option');
                option.value = doc;
                option.textContent = doc;
                docTypeDropdown.appendChild(option);
            });
        }
    }

    function handleFileUpload(input, textId, feedbackId) {
        const file = input.files[0];
        const textElem = document.getElementById(textId);
        const feedbackElem = document.getElementById(feedbackId);

        if (file && file.name.endsWith('.pdf')) {
            textElem.textContent = file.name;
            feedbackElem.innerHTML = '<i class="fas fa-check-circle upload-icon"></i> File uploaded successfully';
            feedbackElem.className = 'upload-feedback upload-success';
            feedbackElem.style.display = 'flex';
        } else {
            textElem.textContent = 'Click to upload PDF';
            feedbackElem.innerHTML = '<i class="fas fa-times-circle upload-icon"></i> Invalid file. Please upload a PDF.';
            feedbackElem.className = 'upload-feedback upload-error';
            feedbackElem.style.display = 'flex';
        }
    }
</script>
</body>
</html>
